CREATE TABLE User (id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY, username NOT NULL VARCHAR(64), info VARCHAR(200), profile_picture VARCHAR(100));
CREATE TABLE GroupMembership (user_id INT NOT NULL UNSIGNED, group_id INT NOT NULL UNSIGNED, PRIMARY KEY (user_id, group_id), FOREIGN KEY (user_id) REFERENCES User(id), FOREIGN KEY (group_id) REFERENCES Group(id));
CREATE TABLE RoleMembership (user_id INT NOT NULL UNSIGNED, role_id INT NOT NULL UNSIGNED, PRIMARY KEY (user_id, role_id), FOREIGN KEY (user_id) REFERENCES User(id), FOREIGN KEY (role_id) REFERENCES GroupRole(id));
CREATE TABLE Group (id INT AUTO_INCREMENT NOT NULL UNSIGNED PRIMARY KEY, group_name VARCHAR(64) NOT NULL, group_description VARCHAR(200), owner_id INT NOT NULL UNSIGNED, FOREIGN KEY (owner_id) REFERENCES User(id));
CREATE TABLE GroupRole (id INT AUTO_INCREMENT NOT NULL UNSIGNED PRIMARY KEY, group_id INT NOT NULL UNSIGNED, role_name NOT NULL VARCHAR(64), role_color NOT NULL VARCHAR(6), permissions INT UNSIGNED NOT NULL, FOREIGN KEY (group_id) REFERENCES Group(id)); 
CREATE TABLE ChatMessage (id AUTO_INCREMENT INT UNSIGNED NOT NULL PRIMARY KEY, author_id INT NOT NULL UNSIGNED, chat_id INT NOT NULL UNSIGNED, content TEXT NOT NULL, expires DATETIME, FOREIGN KEY (authpr_id) REFERENCES User(id), FOREIGN KEY (chat_id) REFERENCES Chat(id));
CREATE TABLE Chat (id AUTO_INCREMENT INT NOT NULL UNSIGNED PRIMARY KEY, group_id INT UNSIGNED, user1_id INT UNSIGNED, user2_id INT UNSIGNED, FOREIGN KEY (user1_id) REFERENCES User(id), FOREIGN KEY (user2_id) REFERENCES User(id), FOREIGN KEY (group_id) REFERENCES Group(id));
